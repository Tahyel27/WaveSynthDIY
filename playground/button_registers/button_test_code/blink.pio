;
; Copyright (c) 2020 Raspberry Pi (Trading) Ltd.
;
; SPDX-License-Identifier: BSD-3-Clause
;

;this program should perform test 1
;should run continuously
;keep clock signal high at start
;set latch to 0 to read data into register
;set latch to high again
;start out giving clock signal by dropping clock to 0
;data starts coming in at rising edge of clock signal - repeat 8 times
;so perform in instruction when clock is already high
; SET pin 0 should be mapped to your LED GPIO

.program blink
.side_set 1
    set pins, 1    side 1 [3]
    set pins, 0    side 1
    set pins, 1    side 1
    set x, 31      side 0 [1] ;read 31 buttons
loop:
    nop            side 1
    in pins,  1    side 1 
    jmp x-- loop   side 0 [1]
    push           side 1    ;the fourth push here will stall, so we need to clear it